
var flights =[];
var flightsJson;
var len;


function errorLog(error){
	console.log(error)
}

function airportToLatLong(airportCode){
	var data1
	var res = []

	for(i =0; i< airports.length; ++i){
		if(airports[i][0] == airportCode){
			res = [airports[i][1], airports[i][2]]				
		}
	}
	return res
}


function parseflightsJson(flightsJson){
	for(var i=0; i < flightsJson.acList.length; ++i){
		if(typeof flightsJson.acList != 'undefined'){
			if(typeof flightsJson.acList[i].From != 'undefined' && typeof flightsJson.acList[i].To != 'undefined'){
				var src = flightsJson.acList[i].From.split(" ");
				var dest = flightsJson.acList[i].To.split(" ");
				src = airportToLatLong(src[0])
				dest = airportToLatLong(dest[0])
				if(!Number.isNaN(src[0]) && !Number.isNaN(src[1]) && !Number.isNaN(dest[0]) && !Number.isNaN(dest[1])){
				var latLong = [src[0],src[1],dest[0],dest[1]]
				//console.log("Latlong value:",latLong)
				flights.push(latLong);
				}
			}
		}
	}
	flights.push([12.32,12.56,-10.52,-5.5])
	console.log("Flights",flights)
	len = flights.length;
	console.log("Length is :",len);
}

$(document).ready(function() {
	$.ajax({
		type:"GET",
		url:"http://public-api.adsbexchange.com/VirtualRadar/AircraftList.json",
		dataType:'jsonp',
		success: function(data){

			try{
				var obj = data
			}catch (error){
				errorLog(error)
			}
				flightsJson = obj
				// console.log(flightsJson)
				if(typeof flightsJson != 'undefined')
					parseflightsJson(flightsJson);
			}
		});
});


if(typeof flights =='undefined'){
	console.log("Inside undefined call")
}


console.log("flights array:", flights);



if(typeof flights == 'undefined'){
	var flights = [
	[43.449928,39.956589,55.606186,49.278728],
	[46.283333,48.006278,55.606186,49.278728],
	[46.283333,48.006278,44.225072,43.081889],
	[55.305836,61.503333,55.606186,49.278728],
	[55.305836,61.503333,55.012622,82.650656],
	[55.408611,37.906111,55.606186,49.278728],
	[55.408611,37.906111,55.34,52.06],
	[55.408611,37.906111,54.64,52.8017],
	[50.6438,36.5901,54.89005,20.592633],
	[50.6438,36.5901,55.606186,49.278728],
	[40.4675,50.046667,55.34,52.06],
	[55.606186,49.278728,59.800292,30.262503],
	[55.606186,49.278728,56.743108,60.802728],
	[59.800292,30.262503,55.34,52.06],
	[59.800292,30.262503,54.64,52.8017],
	[55.34,52.06,56.743108,60.802728],
	[60.949272,76.483617,56.743108,60.802728],
	[60.949272,76.483617,54.64,52.8017],
	[66.041811,76.313938,56.743108,60.802728],
	[55.012622,82.650656,56.743108,60.802728],
	[56.370556,101.698331,52.268028,104.388975],
	[56.370556,101.698331,55.012622,82.650656],
	[55.305836,61.503333,55.012622,82.650656],
	[52.026317,113.305556,52.268028,104.388975],
	[52.268028,104.388975,57.5137,114.1348],
	[52.268028,104.388975,55.012622,82.650656],
	[52.268028,104.388975,56.85,105.7167],
	[52.268028,104.388975,60.723,114.825],
	[52.268028,104.388975,62.09325,129.770672],
	[62.534689,114.038928,55.012622,82.650656],
	[-13.154819,-74.204417,-12.021889,-77.114319],
	[-13.535722,-71.938781,-12.021889,-77.114319],
	[-13.535722,-71.938781,-12.613611,-69.228611],
	[-9.878811,-76.204797,-12.021889,-77.114319],
	[-3.784739,-73.308806,-8.377939,-74.574297],
	[-3.784739,-73.308806,-6.508742,-76.373247],
	[-12.021889,-77.114319,-8.377939,-74.574297],
	[-12.021889,-77.114319,-6.508742,-76.373247],
	[-8.377939,-74.574297,-6.508742,-76.373247],
	[5.261386,-3.926294,11.160056,-4.330969],
	[5.261386,-3.926294,12.353194,-1.512417],
	[5.605186,-0.166786,12.353194,-1.512417],
	[12.533544,-7.949944,5.261386,-3.926294],
	[12.533544,-7.949944,14.739708,-17.490225],
	[12.533544,-7.949944,12.353194,-1.512417],
	[11.160056,-4.330969,12.353194,-1.512417],
	[6.357228,2.384353,6.165611,1.254511],
	[6.357228,2.384353,12.353194,-1.512417],
	[14.739708,-17.490225,12.353194,-1.512417],
	[6.165611,1.254511,12.353194,-1.512417],
	[13.481547,2.183614,12.353194,-1.512417],
	[4.701594,-74.146947,-2.157419,-79.883558],
	[4.701594,-74.146947,-0.141144,-78.488214],
	[3.543222,-76.381583,-2.157419,-79.883558],
	[-2.157419,-79.883558,-0.910206,-89.61745],
	[-2.157419,-79.883558,-0.141144,-78.488214],
	[-0.462886,-76.986842,-0.141144,-78.488214],
	[40.657633,17.947033,47.464722,8.549167],
	[44.828335,-0.715556,47.464722,8.549167],
	[51.382669,-2.719089,47.464722,8.549167],
	[46.238064,6.10895,27.931886,-15.386586],
	[34.875117,33.62485,47.464722,8.549167],
	[27.931886,-15.386586,47.464722,8.549167],
	[25.557111,34.583711,47.464722,8.549167],
	[28.044475,-16.572489,46.238064,6.10895],
	[65.590278,19.281944,64.548322,18.716219],
	[59.651944,17.918611,67.132408,20.814636],
	[59.651944,17.918611,56.691128,12.820211],
	[59.651944,17.918611,57.757594,14.068731],
	[59.651944,17.918611,63.048597,17.768856],
	[59.651944,17.918611,59.4447,13.3374],
	[59.651944,17.918611,64.548322,18.716219],
	[59.651944,17.918611,60.122203,19.898156],
	[59.651944,17.918611,63.408339,18.990039],
	[59.651944,17.918611,61.461686,21.799983],
	[59.651944,17.918611,59.186703,10.258628],
	[59.651944,17.918611,57.662797,18.346211],
	[59.651944,17.918611,64.579083,16.833575],
	[59.651944,17.918611,56.929144,14.727994],
	[67.132408,20.814636,63.048597,17.768856],
	[56.691128,12.820211,57.757594,14.068731],
	[56.691128,12.820211,56.929144,14.727994],
	[65.806111,15.082778,64.579083,16.833575],
	[63.721172,23.143131,61.461686,21.799983],
	[60.122203,19.898156,60.514142,22.262808],
	[60.193917,11.100361,56.929144,14.727994],
	[57.749967,-152.493856,57.471389,-153.815278],
	[57.749967,-152.493856,58.190833,-152.370556],
	[57.749967,-152.493856,57.535,-153.976667],
	[57.749967,-152.493856,57.922876,-152.500511],
	[57.749967,-152.493856,57.218056,-153.269722],
	[57.471389,-153.815278,57.55,-153.75],
	[58.190833,-152.370556,58.166667,-152.5],
	[57.535,-153.976667,57.566944,-154.450278],
	[57.922876,-152.500511,57.885278,-152.846111],
	[58.166667,-152.5,58.49,-152.582222],
	[20.451322,121.979883,14.508647,121.019581],
	[8.951322,125.477972,14.508647,121.019581],
	[7.165242,124.209619,14.508647,121.019581],
	[8.415619,124.611219,14.508647,121.019581],
	[12.502417,124.635778,14.508647,121.019581]
	]

}
	

if(typeof flights =='undefined'){
	console.log("Inside undefined call")
	
}
